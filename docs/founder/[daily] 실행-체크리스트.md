# Workflow Checklist (워크플로우 체크리스트)

> **목적**: 매 Day 프롬프트 실행 전/후에 Gen이 반드시 거쳐야 하는 관문.
> **규칙**: 이 체크리스트를 건너뛰면 "오너십 부채"가 다시 쌓입니다.

---

## Phase 0: 새 기능 시작 전 (Gen이 직접)

### ☐ One-Pager 작성 — Spec-First (Gen → Cowork)

새 기능을 시작하기 전에 Gen이 **1페이지 분량의 기능 명세**를 직접 작성합니다.
코드 용어를 쓸 필요 없습니다. 비즈니스 언어로 적어도 OK.
Cowork은 이 One-Pager를 받아서 기술 프롬프트로 변환합니다.

```markdown
# Day N One-Pager: [기능명]

## 1. WHY — 왜 이 기능을 지금 만드는가?
이 기능이 없으면 어떤 문제가 있는가:
_____________________________________________

이 기능이 있으면 사용자(김현정 담당자)에게 어떤 변화가 생기는가:
_____________________________________________

이 기능 없이 다음 기능(Day N+1)을 만들 수 있는가: 예 / 아니오
→ "아니오"면 이 기능이 블로커. "예"면 순서 바꿀 수 있음.

## 2. WHAT — 무엇을 만드는가?
사용자 시나리오 (김현정 담당자의 하루에서 이 기능이 쓰이는 장면):
  1단계: 담당자가 _________ 한다
  2단계: 시스템이 _________ 한다
  3단계: 결과로 _________ 이 보인다

## 3. HOW — 어떤 구조로 만드는가? (아는 만큼만)
DB에 새 테이블이나 필드가 필요한가: 예 / 아니오
  → 필요하면 어떤 데이터를 저장해야 하는지 간략히:
  _____________________________________________

어떤 API가 필요한가 (아는 만큼만, 모르면 "Cowork에게 위임"):
  - 데이터 조회: GET /api/___
  - 데이터 생성/수정: POST/PUT /api/___
  - 기타: ___

기존에 만들어둔 기능 중 수정이 필요한 것이 있는가:
  _____________________________________________

## 4. DONE — 이 기능이 "완성"이라고 판단할 기준 3가지
  1. _____________________________________________
  2. _____________________________________________
  3. _____________________________________________

## 5. RISK — 걱정되는 것 (아는 만큼만)
  - PII를 다루는가: 예 / 아니오
  - 법적/규제 요구사항이 있는가: 예 / 아니오
  - 파일럿 대학 양식이나 외부 데이터가 필요한가: 예 / 아니오
  - 기타 걱정: _____________________________________________

## 6. BUDGET — 복잡도 상한
  새 파일 최대 N개: ___
  비고: _____________________________________________
```

> **이 One-Pager가 중요한 이유**: Day 1-7에서 "Day N 짜줘"라고 하면 Cowork이 전체를 설계했고, 그 결과 Gen의 머릿속에 "왜 이렇게 만드는지"가 남지 않았습니다. One-Pager를 Gen이 직접 쓰면 설계의 "왜(Why)"가 Gen에게 남습니다.

### ☐ Step 0 Architecture Review (Cowork → Gen)

Gen의 One-Pager를 받은 후, Cowork이 아래 5개 질문에 답하고 Gen에게 보고합니다:

```
☐ 이 기능이 PII를 다루는가?
  → Yes면 docs/agent/reference/pii-data-flow.md 참조 + PII 마스킹/암호화 설계 포함 필수
☐ 이 기능이 외부 API를 호출하는가?
  → Yes면 실패 시 fallback 설계 + 에러 메시지 한국어 정의 필수
☐ 이 기능에 규제 요구사항이 있는가? (FIMS 15일 기한, IEQAS 불법체류율, PIPA 등)
  → Yes면 pii-data-flow.md 컴플라이언스 체크리스트 확인
☐ 이 기능의 대상 데이터 규모는?
  → 1,000명 이상이면 성능 고려 (서버사이드 연산 vs DB 쿼리 최적화)
☐ 이 기능이 기존 기능을 수정하는가?
  → Yes면 영향받는 파일 목록 + 기존 테스트 통과 확인 필수
```

### ☐ 영향 범위 확인 (Cowork → Gen)

Cowork이 새 기능이 기존 시스템에 미치는 영향을 보여줍니다:
- 수정되는 기존 파일 목록
- 새로 만들어지는 파일 목록
- 영향받는 데이터 흐름 (architecture-map.md 기준)
- 다이어그램으로 시각화 (텍스트 기반)

Gen이 이걸 보고 "이 범위가 맞다"고 확인해야 진행.

### ☐ 복잡도 예산 확인

- 이 Day에서 새로 만들어지는 파일: 최대 __개 (Gen이 One-Pager에서 결정)
- 현재 기술 부채 상태 확인 (tech-debt.md)
- 이번 주 위험 예산 내인지 확인

---

## Phase 1: 프롬프트 작성 후 / 실행 전 (Gen 검토)

### ☐ Verification-First 확인

Cowork이 Gen의 성공 기준 3가지를 **구체적인 테스트 시나리오**로 변환했는지 확인:
- [ ] 프롬프트의 첫 번째 Task가 "테스트 시나리오 작성"인가?
- [ ] 테스트가 성공 기준을 정확히 반영하는가?
- [ ] Claude Code가 테스트를 먼저 만들고, 코드를 나중에 작성하도록 지시되어 있는가?

### ☐ 프롬프트 읽기

Gen이 Cowork이 작성한 프롬프트를 직접 읽고:
- [ ] DB 스키마 변경이 있으면 → 직접 확인하고 승인
- [ ] API 엔드포인트 설계가 맞는지 → 직접 확인
- [ ] 성공 기준(Acceptance Criteria)이 내가 정한 3가지를 포함하는지 확인
- [ ] "이건 왜 이렇게 하지?"라고 의문이 드는 부분이 없는지 확인
- [ ] Step 0 리뷰 결과를 확인하고 동의하는지

### ☐ 질문할 것은 질문하기

프롬프트에서 이해 안 되는 기술 용어나 설계가 있으면 Cowork에게 물어봅니다.
Cowork은 각주 + 시각화로 설명합니다.
**이해하지 못한 상태로 실행하지 않습니다.**

---

## Phase 2: 실행 중 (Claude Code)

### ☐ Claude Code 의사결정 질문 처리

Claude Code가 의사결정을 요청하면:
1. Cowork이 각 옵션의 장단점만 설명 (추천 없이)
2. Gen이 직접 판단하여 선택
3. 결과를 decision-log.md에 기록
4. 기술적 배경이 필요하면 Cowork이 학습 포인트 제공

---

## Phase 3: 실행 완료 후 (검증)

### ☐ 코드 흐름 설명 받기

Cowork이 새로 만들어진 기능의 실행 흐름을 설명합니다:
```
1. 사용자가 [어떤 동작]을 하면
2. 브라우저에서 [무엇]이 실행되고
3. 서버에서 [무엇]이 처리되고
4. DB에 [무엇]이 저장되고
5. 결과로 [무엇]이 화면에 표시됨
```

Gen이 이 흐름을 이해하고 "맞다"고 확인해야 통과.

### ☐ 성공 기준 검증

Gen이 Phase 0 One-Pager에서 정한 성공 기준 3가지를 하나씩 확인:
- [ ] 기준 1: _____ → 통과/불통과
- [ ] 기준 2: _____ → 통과/불통과
- [ ] 기준 3: _____ → 통과/불통과

Cowork은 추가 기술 검증(빌드, 타입, 보안 등)을 보조합니다.

### ☐ 기술 부채 업데이트

Cowork이 보고합니다:
- 이 Day에서 새로 발생한 기술 부채
- tech-debt.md 업데이트 내역

### ☐ 의사결정 일지 업데이트

이 Day에서 발생한 의사결정이 모두 decision-log.md에 기록되었는지 확인.

### ☐ Architecture Map 업데이트 필요 여부

새 데이터 흐름이 추가되었으면 architecture-map.md 업데이트 예약 (주간 리뷰에서).

---

## 주간 리뷰 체크리스트 (9개 항목)

> CLAUDE.md의 Weekly Checkpoints와 이 섹션은 동일한 내용입니다.
> 이 문서가 상세 절차를 담고, CLAUDE.md는 요약본을 담습니다.

---

### 1. ☐ Founder Mental Model Check (필수)

매주 `docs/founder/[weekly] 멘탈-모델-체크.md`의 질문 중 2-3개를 골라 Gen이 자기 말로 답합니다.
Cowork이 틀린 부분을 교정하고, 시각화로 재설명합니다.

**진행 방법:**
1. Cowork이 이번 주 작업과 관련된 질문 2-3개를 제안
2. Gen이 자기 말로 답변 작성 (코드 용어 없이 OK)
3. Cowork이 ✅ 맞음 / ⚠️ 부분 교정 / ❌ 재설명 으로 피드백
4. Gap이 발견되면 다이어그램으로 재설명 → Gen이 "이해했다" 확인
5. mental-model-check.md에 검증 결과 기록

**Emergency Brake**: Gen이 2개 이상 질문에 ❌ → 새 기능 중단, gap 해소 우선

> **왜 매주 하는가**: 코드가 매주 30-50개 파일씩 추가되고 있습니다. Gen의 머릿속 모델과 실제 시스템 사이의 gap은 시간이 지날수록 넓어집니다. 매주 2-3개 질문만 확인해도 이 gap이 누적되는 걸 막을 수 있습니다.

---

### 2. ☐ Architecture Walkthrough (필수)

- Cowork이 이번 주 새로 추가된 데이터 흐름을 시각화 (ASCII 다이어그램)
- Gen이 읽고 "이 흐름이 맞다" 확인 또는 "이 부분 이해 안 됨" 표시
- architecture-map.md 업데이트

**포인트**: 코드가 아니라 **데이터의 여정**을 따라갑니다.
예: "사용자가 학생 편집 버튼 클릭 → 브라우저에서 무슨 일이? → 서버에서 무슨 일이? → DB에 뭐가 저장? → 화면에 뭐가 바뀜?"

---

### 3. ☐ 주간 Self-Demo (필수)

Gen이 **직접 브라우저에서** 이번 주 만든 기능을 사용해봅니다.
코드 리뷰가 아니라, 대학 직원(페르소나 P1: 김현정)의 입장에서 클릭하고 입력하는 시간입니다.

**체크 항목:**
- 모든 버튼/라벨이 자연스러운 한국어인가?
- 데스크탑 레이아웃(1280px+)에서 깨지는 부분 없는가?
- 에러가 발생했을 때 사용자에게 친절한 메시지가 보이는가?
- "아, 이게 이렇게 동작하는구나" — 머릿속 이해와 실제 동작이 일치하는가?

**발견한 문제는 즉시 tech-debt.md에 기록합니다.**

> **왜 직접 써보는가**: 코드 리뷰만으로는 "사용자 경험"을 확인할 수 없습니다. 5분 직접 사용이 1시간 코드 읽기보다 많은 문제를 발견합니다. 또한 Gen의 제품 감각(PM 경험)을 가장 잘 활용하는 방법입니다.

---

### 4. ☐ 기술 부채 리뷰

- tech-debt.md 전체 검토
- 🔴(높음) 항목이 3개 이상이면 **Emergency Brake** 발동
- 다음 주 위험 예산 결정: "새 기능 N개, 부채 해소 N개"

---

### 5. ☐ 의사결정 일지 리뷰

- decision-log.md에서 "재검토 시점"이 된 항목 확인
- 과거 결정이 여전히 유효한지 평가
- ❌ UNCONFIRMED 상태인 항목 처리 (현재: D-016 배포 환경)

---

### 6. ☐ Product Strategy Alignment (스펙 대비 진행률)

- Phase1_프로덕트_스펙_v2.1.md 대비 완료/미완료 기능 확인
- Acceptance Criteria 항목별 통과 여부
- Traffic Light 로직, IEQAS 이탈률 계산 정확도 확인
- 스펙에 없는 기능이 추가되지 않았는지 (scope creep 감지)
- 일정 지연 여부

---

### 7. ☐ Legal & Security Audit

- PII 흐름 추적: input → encrypt → store → decrypt → mask → LLM
- Claude API에 raw PII가 전달되지 않는지 확인
- AuditLog 기록이 모든 PII 접근에 존재하는지 확인
- soft delete만 사용되는지 (hard DELETE 없음)
- Cross-tenant isolation: 모든 쿼리가 universityId로 스코핑
- "도구 제공" 포지셔닝 유지 (행정사 업무 자동화로 해석될 수 있는 기능 없음)

---

### 8. ☐ 외부 의존성 상태 확인

- W0 파일럿 대학 컨택 상태
- FIMS 양식 확보 여부
- 기타 외부 블로커 (API 접근, 라이선스, 규제 변경 등)
- 2주 이상 지연 시 **Emergency Brake** — 일정 재조정

---

### 9. ☐ 다음 주 One-Pager 초안

주간 리뷰의 마지막 항목입니다. Gen이 다음 주에 만들 기능의 **One-Pager 스켈레톤**을 작성합니다.

**작성 범위** (Phase 0 템플릿의 6개 섹션 중):
- WHY: 왜 이 기능을 다음에 만드는가? (1-2문장)
- WHAT: 사용자 시나리오 초안 (3-5문장)
- DONE: 성공 기준 3가지 (Gen의 언어로)

나머지 HOW/RISK/BUDGET는 Cowork이 월요일에 flesh를 추가합니다.

> **왜 주말에 초안을 쓰는가**: 금요일에 한 주를 돌아보고, 주말 동안 "다음에 뭘 만들지"를 자연스럽게 생각하게 됩니다. 월요일에 바로 Cowork과 함께 프롬프트를 완성할 수 있어 시간 낭비가 줄어듭니다.

---

### ⚡ Ownership Drift Check (모든 항목에 내장)

위 9개 항목을 진행하면서 **동시에** 확인합니다:

- owner-matrix.md 대비: 이번 주에 "Gen이 판단해야 했는데 AI(Cowork 또는 Claude Code)가 대신 판단한 항목"이 있었는가?
- 발견 시: decision-log.md에 기록 + 재발 방지책 논의
- 오너십 부채가 다시 쌓이고 있다는 신호:
  - Gen이 "그냥 진행시켜"를 3회 이상 연속으로 말함
  - Gen이 결과물을 리뷰 없이 승인
  - Gen이 "이게 뭐야?"를 자주 물음

---

## ⚠️ 비상 브레이크 (언제든 사용)

아래 상황이 발생하면 **즉시 새 기능 추가를 중단**합니다:

1. **"이 코드가 왜 이렇게 동작하는지 모르겠다"** → 흐름 설명 요청
2. **기술 부채 🔴(높음) 항목이 3개 이상** → 부채 해소 우선
3. **Claude Code가 승인 없이 의존성을 추가** → 검토 후 승인/제거
4. **테스트 실패가 2개 이상** → 수정 우선
5. **외부 의존성(W0)이 2주 이상 지연** → 일정 재조정

---

## 템플릿 참조

- **One-Pager 작성법**: 이 문서의 Phase 0 섹션 참조
- **프롬프트 템플릿**: `docs/agent/reference/prompt-templates.md` 참조
- **멘탈 모델 검증 질문**: `docs/founder/[weekly] 멘탈-모델-체크.md` 참조
